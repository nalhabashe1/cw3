(function(){"use strict";var t={780:function(t,e,s){var r=s(144),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("header",{staticClass:"p-4 flex w-full bg-blue-900 text-white font-semibold justify-between"},[s("h1",{staticClass:"font-semibold text-center p-2",domProps:{textContent:t._s(t.sitename)}}),t.cartItemCount>0?s("button",{staticClass:"bg-green-700 w-40 font-semibold h-10 p-2 rounded-lg",on:{click:t.showCheckout}},[t._v(" "+t._s(t.cartItemCount)+" "),s("span",{staticClass:"fas fa-cart-plus"}),t._v(" View Cart ")]):s("button",{staticClass:"bg-gray-200 text-gray-600 w-40 font-semibold h-10 p-2 rounded-lg",on:{click:t.showLesson}},[s("span",{staticClass:"fas fa-cart-plus"}),t._v(" Cart ")])]),t.showLesson?s("LessonsList",{attrs:{lessons:t.lessons},on:{addLesson:t.addToCart}}):t.showCheckout?s("CartCheckout",{attrs:{cart:t.cart},on:{removeLesson:t.removeFromCart}}):t._e(),s("footer",{staticClass:"text-center font-mono text-xl p-4 text-gray-300"},[t._v(" ©2022 Nour Alhabashi M00841472 ")])],1)},n=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-center font-semibold text-4xl p-3"},[t._v(" My Cart ")]),s("div",{staticClass:"grid grid-flow-row grid-cols-4 gap-6 p-5"},t._l(t.cart,(function(e,r){return s("div",{key:r,staticClass:"group relative border-gray-300 shadow-xl border-1 border-gray-300 w-70 rounded-md m-2 font-semibold "},[s("figure",[s("img",{staticClass:"bg-gray-200",attrs:{src:e.image}})]),s("h2",{staticClass:"pl-2"},[t._v("Subject: "+t._s(e.subject))]),s("p",{staticClass:"pl-2"},[t._v("Location: "+t._s(e.location))]),s("p",{staticClass:"pl-2"},[t._v("Price: "+t._s(e.price)+"$")]),s("button",{staticClass:"bg-green-700 text-white rounded-b-md font-semibold p-3 bg-opacity-75 w-full text-center",on:{click:function(s){return t.remove(r,e)}}},[t._v(" Remove from Cart ")])])})),0),s("div",{staticClass:"container mx-auto px-5 bg-gray-200 border-gray-300 border-1 shadow-xl rounded-md p-4"},[s("h1",{staticClass:"font-semibold text-3xl p-3"},[t._v("Checkout")]),s("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.checkForm.apply(null,arguments)}}},[t.errors.length?s("p",{staticClass:"bg-red-300 w-auto rounded-md shadow-xl p-2"},[s("b",[t._v("Please enter the following required fields:")]),s("ul",t._l(t.errors,(function(e){return s("li",{key:e.id},[t._v(t._s(e))])})),0)]):t._e(),s("strong",[t._v("Name: ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"rounded-md",attrs:{placeholder:" Enter Name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("strong",{staticClass:"pl-10"},[t._v("Phone: ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.phoneNumber,expression:"phoneNumber",modifiers:{trim:!0}}],staticClass:"rounded-md",attrs:{placeholder:" Enter Phone Number"},domProps:{value:t.phoneNumber},on:{input:function(e){e.target.composing||(t.phoneNumber=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.valid?t.valid?s("button",{staticClass:"bg-green-700 text-white rounded-md font-semibold p-1 px-2 text-center",attrs:{type:"submit"},on:{click:function(e){return t.newOrder()}}},[t._v("Checkout")]):t._e():s("button",{staticClass:"bg-gray-200 text-gray-600 rounded-md font-semibold p-1 px-2 text-center"},[t._v(" Checkout ")])])])])},i=[],l={name:"CartCheckout",props:["cart","checkout"],data(){return{errors:[],name:"",phoneNumber:"",valid:!1}},methods:{remove(t,e){this.$emit("removeLesson",t,e),console.log("remove prodcut from child",t)},newOrder(){const t={name:this.name,phone:this.phoneNumber,lessons:this.cart.map((t=>({_id:t._id,lessonId:t.id,subject:t.subject,spaces:t.spaces})))};fetch("http://localhost:8000/orders",{method:"POST",status:200,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then(alert("The order has been submitted successfully by name: "+this.name+" phone: "+this.phoneNumber)).then(this.updateSpace(t.lessons),console.log(JSON.stringify(t.lessons))).then(window.location="../App.vue")},updateSpace:t=>{for(let e=0;e<t.length;e++)console.log(t[e]._id),fetch("http://localhost:8000/lessons"+t[e]._id,{method:"PUT",status:200,headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:t[e].spaces-1})}).then((t=>t.json())).catch((t=>{console.log(t)}))},cartCount(t){let e=0;for(let s=0;s<this.cart.length;s++)this.cart[s]===t&&e++;return e},checkForm:function(t){const e=/^[a-zA-z]+$/,s=/^[0-9]+$/;if(this.errors=[],this.name?this.name.match(e)||(this.errors.push("Name should be in letters."),this.valid=!1):(this.errors.push("Name is required."),this.valid=!1),this.phoneNumber?this.phoneNumber.match(s)||(this.errors.push("Phone should be in numbers."),this.valid=!1,console.log("error"+this.valid)):(this.errors.push("Phone is required."),this.valid=!1),this.name.match(e)&&this.phoneNumber.match(s))return this.valid=!0,!0;t.preventDefault()}}},c=l,u=s(1),d=(0,u.Z)(c,a,i,!1,null,null,null),h=d.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("main",[s("div",{staticClass:"container h-auto p-2 content-center",staticStyle:{}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"flex-grow px-4 rounded-l-full p-2 border-3 border-gray-300 rounded-r-full text-sm focus:outline",attrs:{type:"search",placeholder:"Search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),s("input",{attrs:{id:"sortSubject",name:"filter",type:"radio"},on:{Click:t.sortSubject}}),s("label",{attrs:{for:"sortSubject"}},[t._v("Subject ")]),s("input",{attrs:{id:"sortLocation",name:"filter",type:"radio"},on:{Click:t.sortLocation}}),s("label",{attrs:{for:"sortLocation"}},[t._v("Location ")]),s("input",{attrs:{id:"sortAvailability",name:"filter",type:"radio"},on:{Click:t.sortAvailability}}),s("label",{attrs:{for:"sortAvailability"}},[t._v("Availability ")]),s("input",{attrs:{id:"sortLowestPrice",name:"filter",type:"radio"},on:{Click:t.sortLowestPrice}}),s("label",{attrs:{for:"sortLowestPrice"}},[t._v("Low Price ")]),s("input",{attrs:{id:"sortHighestPrice",name:"filter",type:"radio"},on:{Click:t.sortHighestPrice}}),s("label",{attrs:{for:"sortHighestPrice"}},[t._v("High Price ")]),s("input",{attrs:{id:"ascending",name:"filter",type:"radio"},on:{Click:t.ascending}}),s("label",{attrs:{for:"ascending"}},[t._v("Ascending ")]),s("input",{attrs:{id:"descending",name:"filter",type:"radio"},on:{Click:t.descending}}),s("label",{attrs:{for:"descending"}},[t._v("Descending ")])]),s("hr"),s("h1",{staticClass:"text-center font-semibold text-4xl p-3"},[t._v(" Activites")]),s("div",{staticClass:"grid grid-flow-row grid-cols-4 gap-6"},t._l(t.lessons,(function(e){return s("div",{key:e.id,staticClass:"group relative"},[s("div",{staticClass:"shadow-xl border-1 border-gray-300 w-70 rounded-md m-2 font-semibold"},[s("img",{staticClass:"w-50 h-50 object-center bg-gray-200 hover:bg-gray-100",attrs:{src:e.image}}),s("h2",{staticClass:"pl-2"},[t._v("Subject: "+t._s(e.subject))]),s("p",{staticClass:"pl-2"},[t._v("Location: "+t._s(e.location))]),s("p",{staticClass:"pl-2"},[t._v("Price: "+t._s(e.price)+"$")]),s("p",{staticClass:"pl-2"},[t._v("Spaces: "+t._s(e.spaces-t.cartCount(e)))]),s("p",[t._l(e.rating,(function(e){return s("span",{key:e,staticClass:"pl-2"},[t._v("★")])})),t._l(5-e.rating,(function(e){return s("span",{key:e,staticClass:"pl-2"},[t._v("☆")])}))],2),t.canAddToCart(e)?s("button",{staticClass:"bg-green-700 text-white rounded-b-md font-semibold p-3 bg-opacity-75 w-full text-center",on:{click:function(s){return t.add(e)}}},[t._v(" Add to Cart ")]):s("button",{staticClass:"bg-gray-200 text-gray-600 rounded-b-md font-semibold p-3 bg-opacity-75 w-full text-center",attrs:{disabled:"disabled"}},[t._v(" Add to Cart ")])])])})),0)])])},m=[],f={name:"LessonsList",props:["lessons"],data(){return{cart:[]}},methods:{add(t){console.log("add prodcut from child",t),this.$emit("addLesson",t)},canAddToCart(t){return t.spaces>this.cartCount(t)},cartCount(t){let e=0;for(let s=0;s<this.cart.length;s++)this.cart[s]===t&&e++;return e},sortSubject(){this.lessons.sort(((t,e)=>t.subject>e.subject?1:-1))},sortLowestPrice(){this.lessons.sort(((t,e)=>t.price>e.price?1:-1))},sortHighestPrice(){this.lessons.sort(((t,e)=>t.price<e.price?1:-1))},ascending(){this.lessons.sort(((t,e)=>t.subject>e.subject?1:-1))},descending(){this.lessons.sort(((t,e)=>t.subject<e.subject?1:-1))},sortLocation(){this.lessons.sort(((t,e)=>t.location>e.location?1:-1))},sortAvailability(){this.lessons.sort(((t,e)=>t.spaces<e.spaces?1:-1))},sortHighRating(){this.lessons.sort(((t,e)=>t.rating<e.rating?1:-1))}}},b=f,g=(0,u.Z)(b,p,m,!1,null,null,null),v=g.exports,C={name:"App",components:{CartCheckout:h,LessonsList:v},data(){return{sitename:"Hamilton - After School Clubs",lessons:[],cart:[],showLesson:!0}},created(){fetch("http://localhost:8000/lessons").then((t=>t.json())).then((t=>this.lessons=t))},methods:{new(t){console.log(t+"order parent")},addToCart(t){this.cart.push(t),console.log("add from parent"),t.spaces--},removeFromCart(t,e){this.cart.splice(t,1),console.log("remove from parent"),e.spaces++},showBackLesson(){this.showCheckout=!this.showCheckout},showCheckout(){this.showLesson=!this.showLesson}},computed:{cartItemCount(){return this.cart.length}}},_=C,w=(0,u.Z)(_,o,n,!1,null,null,null),y=w.exports;r.Z.config.productionTip=!1,new r.Z({render:t=>t(y)}).$mount("#app")}},e={};function s(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,r,o,n){if(!r){var a=1/0;for(u=0;u<t.length;u++){r=t[u][0],o=t[u][1],n=t[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((function(t){return s.O[t](r[l])}))?r.splice(l--,1):(i=!1,n<a&&(a=n));if(i){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[r,o,n]}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,n,a=r[0],i=r[1],l=r[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var u=l(s)}for(e&&e(r);c<a.length;c++)n=a[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},r=self["webpackChunkcw3"]=self["webpackChunkcw3"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(780)}));r=s.O(r)})();
//# sourceMappingURL=app.41c5d350.js.map